<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>IHP Creator District Login</title>
    <link rel="SHORTCUT ICON" href="/msal/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="/msal/styles.css">
    <!-- msal.min.js can be used in the place of msal.js; included msal.js to make debug easy -->
    <script id="load-msal" src="https://alcdn.msauth.net/browser/2.31.0/js/msal-browser.js"
        integrity="sha384-BO4qQ2RTxj2akCJc7t6IdU9aRg6do4LGIkVVa01Hm33jxM+v2G+4q+vZjmOCywYq"
        crossorigin="anonymous"></script>
    <!-- adding Bootstrap 5 for UI components  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<style>

	#title{
		padding-top:20px;
	}
	
	.center {
		position: relative;
		top: 20%;
		left: 50%;
		transform: translate(-50%, -50%);
	}
	
	.annotation{
		font-size:60%;
		font-style:italic;
	}

	.ihpc{
	background: url(/src/images/business-background.jpg) no-repeat;
		background-size: auto;
	  background-size: 100% 100%;
	  width: 100%;
	  height: 100%;
	}
	.main-header{
		background-color:rgb(66, 165, 245);
		color:white;
		height:200px;
		text-align:center;
		font-size:24pt;
	}

	.noDistrict{
		color:white;
		text-align:center;
		font-size:24pt;
	}
</style>

<body class='ihpc'>

	<div class='main-header'>
		<img src='/src/images/logoCorner.png' style='width:165px;position:absolute;top:0px;left:7px;z-index:1000;'>
		<div id='title'>Sign Into Your District SSO with SAML</div>
		<div class='annotation'>(Bookmark this page)</div>
		
		
		
		
		PRESENTLY UNUSED IN FAVOR OF LIB/RECEIVE AND REDIRECT<br>see saml-ui-processes.js
		
		
		
		
		
		<div class='center'>
			   <div id='buttonContainer' class="navbar-collapse justify-content-end">
					<button type="button" id="signIn" class="btn btn-secondary" onclick="signIn()">Sign-in</button>
					<button type="button" id="signOut" class="btn btn-success" onclick="signOut()">Sign-out</button>
				</div>
		</div>
	</div>


</body>



    <!-- importing bootstrap.js and supporting js libraries -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>

    <!-- importing app scripts (load order is important) -->
    <script type="text/javascript" src="/msal/samlAuthConfig.js"></script>
    
    
    
    <script type="text/javascript" src="/msal/ui.js"></script>
    <script type="text/javascript" src="/msal/claimUtils.js"></script>
    
    <!-- <script type="text/javascript" src="/msal/authPopup.js"></script> -->
    <!-- <script type="text/javascript" src="/msal/authRedirect.js"></script> -->
<script type="text/javascript" src="/msal/authPopup.js"></script>

    <script type="text/javascript" src="/msal/fetch.js"></script>
    
    
    <script type='text/javascript'>
	/* <![CDATA[ */

			function isElementHidden(id) {
			var element = document.getElementById(id);
			return window.getComputedStyle(element).display === 'none';
		}
		(callback => {
			if (document.readyState != 'loading') callback();
			else document.addEventListener('DOMContentLoaded', callback);
		})(() => {
		
			const districtName=window.location.pathname.match( /\/([^\/?]*)$/)[1];
			
			
			if (districtName!='dmschools.org') {
				var container = document.getElementById('buttonContainer');
				container.innerHTML = `<div class='noDistrict'>No such district as '${districtName}'</div>`;
				return;
			}
			


				var button = document.getElementById('title');
				button.innerHTML = `Sign in to ${districtName} SSO`;
			
			
			const msalHidButtonBecauseAlreadyLoggedIn = isElementHidden('signIn');

			if (msalHidButtonBecauseAlreadyLoggedIn) {
				var button = document.getElementById('signIn');
				button.innerHTML = 'Already Signed In. Click to Continue.';
				button.classList.remove('d-none');
				//setTimeout(signIn, 2000);
			} else {
				setTimeout(callback, 500);
			}
			//signIn()
		}); //immediate call, unnamed arrow function


	
	/* ]]> */
</script>

</html>